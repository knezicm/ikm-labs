From e3dbd903b8d83c661ce161dd41940f770b06c422 Mon Sep 17 00:00:00 2001
From: Aleksandar Simonovic <simonovic.aleksandar@hotmail.com>
Date: Sat, 10 Dec 2022 13:46:40 +0100
Subject: [PATCH] Patched Makefile

---
 sllin/Makefile | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

diff --git a/sllin/Makefile b/sllin/Makefile
index 8ae7510..b6aeeca 100644
--- a/sllin/Makefile
+++ b/sllin/Makefile
@@ -1,10 +1,11 @@
 obj-m += sllin.o
-KPATH=/lib/modules/$(shell uname -r)/build
-#KPATH=/mnt/data/_dokumenty_/_w_/_dce_can_/src/can-benchmark/kernel/build/shark/3.0.4
-#KPATH=/mnt/data/_dokumenty_/_w_/_dce_can_/src/can-benchmark/kernel/build/shark/2.6.36
+SRC := $(shell pwd)
 
 all:
-	make -C ${KPATH} M=$(PWD) modules
+	$(MAKE) -C $(KERNEL_SRC) M=$(SRC) modules
+
+modules_install:
+	$(MAKE) -C $(KERNEL_SRC) M=$(SRC) modules_install
 
 clean:
-	make -C ${KPATH} M=$(PWD) clean
+	$(MAKE) -C $(KERNEL_SRC) M=$(SRC) clean
